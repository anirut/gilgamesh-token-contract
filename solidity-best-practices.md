# Smart Contract best practices
References:
 - https://github.com/ConsenSys/smart-contract-best-practices
 - https://learnxinyminutes.com/docs/solidity/

### Best Practices
- use `this` to invoke external functions `this.f()`
- all state variables have a `getter` function by default
- use require for assertion
- all getter method should be `constant`
-  is better to let users withdraw funds rather than push funds to them automatically
- Race condition:
    We have recommended finishing all internal work first, and only then calling the external function
    and avoid calling functions which call external functions

In `for (var i = 0; i < arrayName.length; i++) { ... }`, the type of `i` will be `uint8`, because this is the smallest type that is required to hold the value `0`. If the array has more than `255` elements, the loop will not terminate.

### Function Visibility specifiers
 These can be placed where 'constant' is, including:
- public - visible externally and internally (default)
- external
- private - only visible in the current contract
- internal - only visible in current contract, and those deriving from it

### Snippet code to listen event logs with JavaScript
```sh
pragma solidity ^0.4.0;

contract ClientReceipt {
    event Deposit(
        address indexed _from,
        bytes32 indexed _id,
        uint _value
    );

    function deposit(bytes32 _id) payable {
        // Any call to this function (even deeply nested) can
        // be detected from the JavaScript API by filtering
        // for `Deposit` to be called.
        Deposit(msg.sender, _id, msg.value);
    }
}
The use in the JavaScript API would be as follows:

var abi = /* abi as generated by the compiler */;
var ClientReceipt = web3.eth.contract(abi);
var clientReceipt = ClientReceipt.at(0x123 /* address */);

var event = clientReceipt.Deposit();

// watch for changes
event.watch(function(error, result){
    // result will contain various information
    // including the arguments given to the Deposit
    // call.
    if (!error)
        console.log(result);
});

// Or pass a callback to start watching immediately
var event = clientReceipt.Deposit(function(error, result) {
    if (!error)
        console.log(result);
});
```
